    Hello, everyone, my name is youxiao, it’s my time to give presentation about what I have done for graduation report, 
the title of my thesis is design and implementation of base service subsystem of custody business system, 
my supervisor is professor Jiang linying, and my associate supervisor is Wei Jingqi who is technical manager of my internship company.


    as name implied, the base service subsystem provides base technical support to custody business system, the custody business system provide IT infrastructure to custody business, so firstly, I give a introduction of custody business, actually, It’s common to invest some funds or some other financial products, but without necessary supervision and constraints, these investment behaviors may be in high risk, It’s necessary to use custody services provided by some institute, usually it’s commercial bank. 
    We can figure out the architecture relevant participants  of custody business from this diagram, In general, there are three participants in the process of custody business, one is investment manager who is the manager of delegated assets and decision-makers of investment behavior, another one is principal or so called investor who is the true owner of the delegated assets and should bear the risk of failure investment, the custodian is a specialized financial institution responsible for safeguarding individual's financial assets, and supervise the investment behaviors.
    there are several core services provided by custodian bank, for example, asserts safekeeping make sure asserts of investor is safe-keeping and data is stored in high security, the custodian also need to evaluate the funds, besides accounting and clearing operations is core part of custody business, what’s more, supervision is also very important so that investment behaviors can be managed, reports and information disclosure are mainly used to show performance of funds.

    in order to establish IT infrastructure to custody business of commercial bank, my company  model the whole process of custody business, the architecture of whole system is shown in figure, obviously, we need to provide corresponding subsystems to custody services mentioned above, for example, geminia and geminic is in charge of accouting and clearing.
    most importantly, we need some common and basic supports to whole system, that’s what I mainly focused on, as the figure shows, the red part is base service subsystem of custody business system.


   In detail, there are four parts of base service subsystem, more specifically, the data management module is responsible for managing data interface and handling importing process of raw data, Single Sign-On module provides , central authentication service  to all subsystems. moreover, clearing reports management module present solution of querying of tens of reports and processing formatting of reports.
Besides, lacking of solution of storage of queue and massive session, a key-value database product based on disk storage engine is needed.

   because all of these modules is independent, so I will introduce them in three  aspects separately, including requirement, design and implementation.

    Secondly, because there are many data types in custody business system, like trading data, TA data, settlement data, third-party data, off-site data, but these data have different formats, causing it’s hard to manage and analyze, so we have to manage these data interfaces in data management module so that accounting and clearing subsystems work well. Besides, a data importer is needed to import raw data and format data into self-defined data schema, the requirements of data management can be shown in this figure.
   there is a role called data manager, he need to configure data interface first, next, for every specific data schema, data manager need to configure a data importer, then data manager start import engine, import engine  read raw data from raw data warehouse first, then it import different data files concurrently after figuring out importer strategies. Most importantly, it will reformat data record using configured formatting strategies., and finally data records are imported into database.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             the design of data interface management is simple, I just mainly cover design of importing process. 
    once import engine is started, it queries database for importer configuration which declare how and where to retrieve raw data, next, import engine depends on  ftp service to find valid file from ftp site, actually, when ftp service scan directories, it check the file name and valid file name pattern,  once a valid file is found, it will download it then notify import engine to read file. 
Import engine will choose a specific reader adapting to the file type to read data record, there are several different reading strategies, it depends on what have been configured by data manager. 
after reading, import engine will start data importer to format data records by using suitable formatters, finally, DbImporter is in charge of persisting data records into relational database.
     
    Finding out the process of data importing, I wan to  illustrates the design of database schema, first of all, the GDM_DAATACONFIG stands for importer configuration which describes where the raw data locates, pattern of file name and some basic info of importer, it uses the GDM_IF entity which means data interface, while the GDM_IF_CATE declares the classification of data interface. 
  What’s more, the importer configuration contains two more parts, the GDM_MAPFIELD represents fields definition of our database, the GDM_SOURCEMAP indicates fields definitions of source file.
  Besides, in the process of file scanning, downloading statuses are recorded into GDM_DOWNLOADRECORD, it tells whether to download the file or not, GDM_IMPORTRECORD manage import status of data records.

    the class diagram is shown like this. ImportEngine is the core of importing process, it depends on several parts, it use DataScanner to scan data from different data center. DataReaderFactory is responsible for selecting suitable file reader, DataImporterFactory is in charge of find fit importer, and specific importer will use Formatter to handle formatting process. 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
